<dom-module id="super-awesome-book">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
    <script src="https://openlibrary.org/api/books?bibkeys=ISBN:[[isbn]]&jscmd=details"></script>
    <!--TODO: https://stackoverflow.com/questions/14521108/dynamically-load-js-inside-js This might be something to check out-->
    <img id="cover" src="https://covers.openlibrary.org/b/[[getPathPair()]]-M.jpg" alt="[[title]]" onclick="[[getTitle]]"/>
    <p id="title">[[title]]</p>
  </template>

  <script>
    /**
     * `super-awesome-book`
     * Book display autoloading from OpenLibrary
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class SuperAwesomeBook extends Polymer.Element {
      static get is() { return 'super-awesome-book'; }
      static get properties() {
        return {
          isbn: {
            type: String
          },
          goodreads: {
            type: String
          },
          key: {
            type: String,
            computed: 'findValidKey()'
          },
          title: {
            type: String,
            computed: 'getTitle()'
          },
        };
      }

      findValidKey() {
        // TODO: Find a more efficient method
        if(this.isbn){
          return 'isbn'
        }
        if(this.goodreads){
          return 'goodreads'
        }
      }

      getPathPair() {
        // FIXME: This is bad and incorrect
        if(this.isbn){
          return 'isbn/'+this.isbn;
        }
        if(this.goodreads){
          return 'goodreads/'+this.goodreads;
        }
      }

      getTitle() {
        console.log(this._OLBookInfo);
        return "TODO";
      }

      constructor() {
        super();

        // set key here
        // set key type
        // set path pair
      }
    }

    window.customElements.define(SuperAwesomeBook.is, SuperAwesomeBook);
  </script>
</dom-module>
